<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Dự báo Lượng Mưa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f4f6f9; padding: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .form-container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .result-box { background: #28a745; color: white; padding: 20px; border-radius: 10px; margin-top: 30px; text-align: center; font-size: 28px; font-weight: bold; box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3); }
        .section-title { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 5px; margin-bottom: 20px; margin-top: 20px; font-weight: 600; }
        label { font-weight: 500; color: #555; }
        .btn-predict { height: 50px; font-size: 18px; font-weight: bold; letter-spacing: 1px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4 text-uppercase fw-bold text-primary">Hệ Thống Dự Báo Lượng Mưa</h1>

        <div class="row justify-content-center">
            <div class="col-lg-10 form-container">
                <form method="post">
                    {% csrf_token %}

                    <div class="section-title">1. Thông tin chung</div>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label>Ngày dự báo:</label>
                            <input type="date" name="date" class="form-control" required>
                        </div>
                        <div class="col-md-4">
                            <label>Địa điểm (Location):</label>
                            <select name="location" class="form-control">
                                <option value="Sydney">Sydney</option>
                                <option value="Melbourne">Melbourne</option>
                                <option value="Canberra">Canberra</option>
                                <option value="Brisbane">Brisbane</option>
                                <option value="Adelaide">Adelaide</option>
                                <option value="Perth">Perth</option>
                                <option value="Hobart">Hobart</option>
                                <option value="Darwin">Darwin</option>
                                </select>
                        </div>
                        <div class="col-md-4">
                            <label>Mưa hôm nay (RainToday)?</label>
                            <select name="raintoday" class="form-control">
                                <option value="No">Không (No)</option>
                                <option value="Yes">Có (Yes)</option>
                            </select>
                        </div>
                    </div>

                    <div class="section-title">2. Nhiệt độ & Nắng gió</div>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label>Min Temp:</label>
                            <input type="number" step="0.1" name="mintemp" class="form-control" placeholder="Vd: 13.4" required>
                        </div>
                        <div class="col-md-3">
                            <label>Max Temp:</label>
                            <input type="number" step="0.1" name="maxtemp" class="form-control" placeholder="Vd: 22.9" required>
                        </div>
                        <div class="col-md-3">
                            <label>Bốc hơi:</label>
                            <input type="number" step="0.1" name="evaporation" class="form-control" placeholder="Vd: 4.6" required>
                        </div>
                        <div class="col-md-3">
                            <label>Giờ nắng:</label>
                            <input type="number" step="0.1" name="sunshine" class="form-control" placeholder="Vd: 8.5" required>
                        </div>
                    </div>

                    <div class="section-title">3. Thông số Gió</div>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label>Hướng gió mạnh nhất:</label>
                            <select name="windgustdir" class="form-control">
                                <option value="W">W (Tây)</option>
                                <option value="N">N (Bắc)</option>
                                <option value="S">S (Nam)</option>
                                <option value="E">E (Đông)</option>
                                <option value="NW">NW</option>
                                <option value="NE">NE</option>
                                <option value="SW">SW</option>
                                <option value="SE">SE</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label>Tốc độ gió mạnh nhất (km/h):</label>
                            <input type="number" step="0.1" name="windgustspeed" class="form-control" placeholder="Vd: 44.0" required>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-3"><label>Hướng gió 9am:</label><input type="text" name="winddir9am" class="form-control" value="W" required></div>
                        <div class="col-md-3"><label>Tốc độ gió 9am:</label><input type="number" step="0.1" name="windspeed9am" class="form-control" value="20.0" required></div>
                        <div class="col-md-3"><label>Hướng gió 3pm:</label><input type="text" name="winddir3pm" class="form-control" value="WNW" required></div>
                        <div class="col-md-3"><label>Tốc độ gió 3pm:</label><input type="number" step="0.1" name="windspeed3pm" class="form-control" value="24.0" required></div>
                    </div>

                    <div class="section-title">4. Độ ẩm, Áp suất & Mây</div>
                    <div class="row mb-3">
                        <div class="col-md-3"><label>Độ ẩm 9am (%):</label><input type="number" step="0.1" name="humidity9am" class="form-control" placeholder="71" required></div>
                        <div class="col-md-3"><label>Độ ẩm 3pm (%):</label><input type="number" step="0.1" name="humidity3pm" class="form-control" placeholder="22" required></div>
                        <div class="col-md-3"><label>Áp suất 9am (hPa):</label><input type="number" step="0.1" name="pressure9am" class="form-control" placeholder="1007.7" required></div>
                        <div class="col-md-3"><label>Áp suất 3pm (hPa):</label><input type="number" step="0.1" name="pressure3pm" class="form-control" placeholder="1007.1" required></div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-3"><label>Mây 9am (0-9):</label><input type="number" step="0.1" name="cloud9am" class="form-control" placeholder="8" required></div>
                        <div class="col-md-3"><label>Mây 3pm (0-9):</label><input type="number" step="0.1" name="cloud3pm" class="form-control" placeholder="5" required></div>
                        <div class="col-md-3"><label>Nhiệt độ 9am (°C):</label><input type="number" step="0.1" name="temp9am" class="form-control" placeholder="16.9" required></div>
                        <div class="col-md-3"><label>Nhiệt độ 3pm (°C):</label><input type="number" step="0.1" name="temp3pm" class="form-control" placeholder="21.8" required></div>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary btn-predict shadow">
                            ☁️ DỰ BÁO LƯỢNG MƯA
                        </button>
                    </div>
                </form>

                {% if prediction is not None %}
                <div class="result-box">
                    {% if prediction == "Error" %}
                        <span style="color: #ffcccc;">⚠️ Đã xảy ra lỗi khi xử lý!</span>
                    {% else %}
                        Kết quả dự báo: <span style="color: #ffeb3b">{{ prediction }} mm</span>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>